gpasm-0.9.0 (Mar 19 2013)    YDDY3221.asm       2013-6-19  10:08:11          PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ;/******************************************************************
                      00002 ;32P21移动电源 模板
                      00003 ;******************************************************************/
                      00004 #include  "MC32P21.H"
                      00001 
                      00222 LIST
                      00223 
                      00005 #include  "VAR.H"
                      00085 LIST
                      00086 
                      00006 #include  "CONST.H"
                      00097 LIST
                      00098 
                      00007 #include  "TM1628.H"
                      00073 LIST
                      00074 
                      00008 
                      00009 #define Test            0
                      00010 
                      00011 ;#pragma __CONFIG    _CONFIG1, _BOR_36 & _MCLR_OFF & _FOSC_4M & _FCPU_2T & _TWDT_18_18 & _WDT_ON
                      00012 ;__CONFIG    _CONFIG2, _RDPORT_PIN & _SMT_ON & _MCU_FEL & _OSCM_HS_RTC & _CP_ON
                      00013 list
0000                  00014 .code
                      00015         ;------------------------------------------------------
                      00016         org     0x00
0000   A000           00017         goto    RSET
                      00018                         
                      00019         org     0x08
0008   A000           00020         goto    InterruptSbr    
0009                  00021 DigTbl:
0009   F514           00022         DW      DZero   <<8|DOne
000A   D95D           00023         DW      DTwo    <<8|DThree
000B   3C6D           00024         DW      DFour   <<8|DFive
000C   ED54           00025         DW      DSix    <<8|DSeven
000D   FD7D           00026         DW      DEight  <<8|DNine
000E   FCAD           00027         DW      DLetterA<<8|DLetterb
000F   E19D           00028         DW      DLetterC<<8|DLetterd
0010   E9E8           00029         DW      DLetterE<<8|DLetterF
                      00030         org     0x3ff           ;复位向量
03FF   A000           00031         goto    RSET
                      00032         org     0x11
                      00033         
                      00034 ;#include  "CtrlSbr.asm"
                      00035 #include  "KeySbr.asm"
0011                  00001 KeySbr:
0011   FD94           00002         jbclr   pKey
0012   A000           00003         goto    NoKeySbr
0013   6618           00004         incr    KeyCnt
0014   3C32           00005         movai   50
0015   4818           00006         rsubar  KeyCnt
0016   E187           00007         jbset   C
0017   000C           00008         return
0018   7618           00009         clrr    KeyCnt
0019   6619           00010         incr    KeyLongth
001A   3C08           00011         movai   8
001B   4819           00012         rsubar  KeyLongth
001C   E187           00013         jbset   C
001D   000C           00014         return
                      00015         ;------------------------------------------------------
                      00016         ;长按键
001E                  00017 KeyLongthSbr:
001E   F202           00018         jbclr   FKeyAck
001F   000C           00019         return
0020                  00020 KeyLongthSbr0:
0020   C202           00021         bset    FKeyAck
0021   F390           00022         jbclr   pLedW
0022   A000           00023         goto    KeyLongthSbr1
0023   C390           00024         bset    pLedW
0024   000C           00025         return
0025                  00026 KeyLongthSbr1:
0025   D390           00027         bclr    pLedW
0026   000C           00028         return
                      00029         ;------------------------------------------------------
                      00030         ;短按键
0027                  00031 KeyShortSbr:
0027   C202           00032         bset    FKeyAck
0028   FE02           00033         jbclr   FVIN
0029   000C           00034         return
002A   DE03           00035         bclr    FDisCHGAD
002B   F002           00036         jbclr   FPwr
002C   A000           00037         goto    KeyShortSbr1
002D   761F           00038         clrr    LoadCnt 
002E   3CC8           00039         movai   C250ms
002F   5617           00040         movra   T250ms
0030   C002           00041         bset    FPwr
0031   C194           00042         bset    pPwr
0032   DF88           00043         bclr    GIE
0033   D18A           00044         bclr    T0IE
0034   3C88           00045         movai   0x88            ;T0做PWM
0035   57A0           00046         movra   T0CR
0036   3C80           00047         movai   CT0
0037   57A2           00048         movra   T0LOAD
0038   3C0A           00049         movai   CT0/12
0039   3C01           00050         movai   1
003A   561D           00051         movra   DisCHGPWM
003B   57A3           00052         movra   T0DATA
003C   CDA0           00053         bset    PWM0OE
                      00054         
003D   C38A           00055         bset    T1IE
003E   3C8F           00056         movai   0x8F
003F   57A4           00057         movra   T1CR
0040   3CFA           00058         movai   CT_2ms
0041   57A2           00059         movra   T0LOAD
0042   CF88           00060         bset    GIE
0043   000C           00061         return
0044                  00062 KeyShortSbr1:
0044   D002           00063         bclr    FPwr
0045   D194           00064         bclr    pPwr
0046   D594           00065         bclr    pDisCHG
0047   DDA0           00066         bclr    PWM0OE
0048   000C           00067         return
                      00068         ;------------------------------------------------------
0049                  00069 NoKeySbr:
0049   F202           00070         jbclr   FKeyAck
004A   A000           00071         goto    NoKeySbrR               ;按键已响应
                      00072         
004B   5A19           00073         movr    KeyLongth
004C   E587           00074         jbset   Z
004D   A000           00075         goto    KeyShortSbr
004E   5A18           00076         movr    KeyCnt
004F   F587           00077         jbclr   Z
0050   A000           00078         goto    NoKeySbr1
0051   3C03           00079         movai   3
0052   4818           00080         rsubar  KeyCnt
0053   F187           00081         jbclr   C
0054   A000           00082         goto    KeyShortSbr
0055                  00083 NoKeySbr1:
0055                  00084 NoKeySbrR:
0055   D202           00085         bclr    FKeyAck
0056   7618           00086         clrr    KeyCnt
0057   7619           00087         clrr    KeyLongth
0058   000C           00088         return
                      00089 
                      00036 #include  "InitSys.asm"
                      00001 
                      00002 
0059                  00003 InitialSys:
                      00004         ;端口初始化-------------------------------------------------
                      00005         ;P0 --------------------------------------------------------
0059   C794           00006         bset    P1,3
005A   D594           00007         bclr    P1,2
005B   D390           00008         bclr    pLedW   
005C   3CF2           00009         movai   0xF2
005D   5791           00010         movra   OEP0
005E   3C8D           00011         movai   0x8D
005F   5795           00012         movra   OEP1
0060   7792           00013         clrr    PUP0
0061   3C40           00014         movai   0x40
0062   5796           00015         movra   PUP1
0063   3C0D           00016         movai   0x0D
0064   5793           00017         movra   ANSEL
                      00018         ;T0---------------------------------------------------------
                      00019         ;不中断
                      00020         ;25us:4M/8 = 1M = *250  
                      00021         ;-----------------------------------------------------------
0065   3C8F           00022         movai   0x8F;8
0066   57A0           00023         movra   T0CR    ;
0067   3CFA           00024         movai   CT_2ms
0068   57A2           00025         movra   T0LOAD
0069   3C01           00026         movai   1;CT0/8 ;0xFF
006A   57A3           00027         movra   T0DATA
                      00028         ;T1---------------------------------------------------------
                      00029         ;25us:16M = 0.0625us *100 = 6.25us      
                      00030         ;-----------------------------------------------------------
006B   3C8F           00031         movai   0x8F
006C   57A4           00032         movra   T1CR    ;
006D   3CFA           00033         movai   CT_2ms
006E   57A6           00034         movra   T1LOAD
006F   3C32           00035         movai   CT1/2
0070   57A7           00036         movra   T1DATA
                      00037         ;WDT--------------------------------------------------------
                      00038         ;-----------------------------------------------------------
                      00039         ;LVDCR
0071   7797           00040         clrr    KBIM    
0072   3C08           00041         movai   8
0073   5788           00042         movra   MCR                        
0074   778A           00043         clrr    INTE
0075   778B           00044         clrr    INTF
0076   77AE           00045         clrr    OSCM
0077   3C03           00046                 movai   CADRefVDD
0078   57B1           00047                 movra   ADCR1
0079   000C           00048         return
                      00049 ;-----------------------------------------------------------
                      00050 ;初始化RAM
                      00051 ;-----------------------------------------------------------
007A                  00052 InitalRAM:
007A   7784           00053         clrr    FSR0   
007B                  00054 InitalRAM0:
007B   7780           00055         clrr    INDF0                       
007C   6784           00056         incr    FSR0
007D   3C7F           00057         movai   0x7F
007E   4984           00058         rsubar  FSR0
007F   E587           00059         jbset   Z
0080   A000           00060         goto    InitalRAM0
                      00061                 
0081   3CC8           00062         movai   C250ms
0082   5607           00063         movra   PwrDly
0083   3CC8           00064         movai   C1d5ms
0084   5608           00065         movra   T1d5ms
0085   3CC8           00066         movai   C250ms
0086   5617           00067         movra   T250ms
0087   C38A           00068         bset    T1IE
0088   000C           00069         return
                      00070 ;-----------------------------------------------------------
                      00071         
                      00037 #include  "interrupt.asm"
                      00001 
                      00002 
0089                  00003 InterruptSbr:
0089   5600           00004         movra   ABuf
008A   4587           00005         swapar  PFLAG
008B   5601           00006         movra   PFLAGBuf
                      00007         
008C   E98B           00008         jbset   KBIF
008D   A000           00009         goto    TMI1Sbr
                      00010         ;键盘中断---------------------------------------------------
008E                  00011 KBIMSbr:
008E   D98B           00012         bclr     KBIF
008F   7626           00013         clrr    TStop5s
                      00014         ;----------------------------------------------------------
0090                  00015 TMI1Sbr:
0090   E38A           00016         jbset   T1IE
0091   A000           00017         goto    TMI0Sbr
0092   E38B           00018         jbset   T1IF                             
0093   A000           00019         goto    INT1Sbr
                      00020         ;定时器1中断子程序------------------------------------------
0094   D38B           00021         bclr    T1IF
0095   C403           00022         bset    F2ms
                      00023                 ;movai  0x02
                      00024                 ;xorra  P0
0096   A000           00025         goto    INT1Sbr
0097                  00026 TMI0Sbr:
0097   E18A           00027         jbset   T0IE
0098   A000           00028         goto    INT1Sbr
0099   E18B           00029         jbset   T0IF                             
009A   A000           00030         goto    INT1Sbr
                      00031         ;定时器1中断子程序------------------------------------------
009B   D18B           00032         bclr    T0IF
                      00033         ;djzr   T1d5ms
009C   C403           00034         bset    F2ms
                      00035                 ;movai  0x02
                      00036                 ;xorra  P0
                      00037         ;goto   INT1Sbr
                      00038         ;movai  C1d5ms
                      00039         ;movra  T1d5ms
                      00040         ;bset   F2ms
                      00041         ;外部中断1子程序------------------------------------------
009D                  00042 INT1Sbr:
009D   E78A           00043         jbset   INT1IE
009E   A000           00044         goto    InterruptSbrR
009F   E78B           00045         jbset   INT1IF
00A0   A000           00046         goto    InterruptSbrR
00A1   D78B           00047         bclr    INT1IF
00A2   7626           00048         clrr    TStop5s
                      00049         ;----------------------------------------------------------
00A3                  00050 InterruptSbrR:
00A3   4401           00051         swapar  PFLAGBuf
00A4   5787           00052         movra   PFLAG
00A5   4600           00053         swapr   ABuf
00A6   4400           00054         swapar  ABuf
00A7   000D           00055         retie
                      00056         
                      00057         
                      00038 #include  "T250msSbr.asm"
00A8                  00001 T250msSbr:
00A8   3CC8           00002         movai   C250ms
00A9   5617           00003         movra   T250ms
00AA   3C08           00004         movai   CF250
00AB   4202           00005         xorra   Flag1
00AC   F602           00006         jbclr   FF250
00AD   A000           00007         goto    T250msSbr1
00AE   3C04           00008         movai   CFlash
00AF   4202           00009         xorra   Flag1
00B0                  00010 T250msSbr1:     
                      00011                 ;jbclr  FStopTmr
                      00012                 ;return
00B0   FE02           00013         jbclr   FVIN
00B1   A000           00014         goto    PwrInSbr
00B2   D794           00015         bclr    pCHG
00B3   F002           00016         jbclr   FPwr
00B4   A000           00017         goto    IfDisCHGSbr
00B5   DE03           00018         bclr    FDisCHGAD
00B6   D594           00019         bclr    pDisCHG
00B7   D194           00020         bclr    pPwr
00B8   DDA0           00021         bclr    PWM0OE
00B9   D794           00022         bclr    pCHG
00BA   DDA4           00023         bclr    PWM1OE
00BB   D802           00024         bclr    FCHGOver
00BC   DC02           00025         bclr    FCHGTmr
00BD   6626           00026         incr    TStop5s
00BE   3C14           00027         movai   20
00BF   4826           00028         rsubar  TStop5s
00C0   F187           00029         jbclr   C
00C1   C203           00030         bset    FStop
00C2   000C           00031         return
                      00032         ;备有电池充电状态--------------------------------------
00C3                  00033 PwrInSbr:
00C3   7626           00034         clrr    TStop5s
00C4   DE03           00035         bclr    FDisCHGAD
00C5   D594           00036         bclr    pDisCHG
00C6   DDA0           00037         bclr    PWM0OE
00C7   D194           00038         bclr    pPwr
00C8   D002           00039         bclr    FPwr
                      00040 
00C9   F802           00041         jbclr   FCHGOver
00CA   A000           00042         goto    CHGOverSbr      ;充电结束
                      00043 ;--------------------------------------------------------------
                      00044         ;电池电压大于4.24V充电结束
                      00045         ;电流连续30分钟小于100mA充电结束
00CB                  00046 CHGSbr:
00CB   EDA4           00047         jbset   PWM1OE
00CC   A000           00048         goto    InitCHGPWM
                      00049                         ;return
00CD                  00050 CHGSbr0:
00CD   8000           00051         call    CHGPWMSbr
                      00052         ;movai  CBATU424
                      00053         ;rsubar ADVBat+1
                      00054         ;jbclr  C
                      00055         ;call   Delay30MinSbr   ;Vbat>=4.24去计时程序
                      00056         ;------------------------------------------------------
00CE                  00057 IfILowMinSbr:
00CE   5A16           00058         movr    ADIOut+1
00CF   E587           00059         jbset   Z
00D0   000C           00060         return
00D1   3C05           00061         movai   low(CBATI100mA)
00D2   4815           00062         rsubar  ADIOut
00D3   E187           00063         jbset   C
00D4   A000           00064         goto    Delay30MinSbr
00D5   DC02           00065         bclr    FCHGTmr         ;I>100mA
00D6   3CC2           00066         movai   CBATU424
00D7   480E           00067         rsubar ADVBat+1
00D8   F187           00068         jbclr   C
00D9   A000           00069         goto    CHGOverSbr      ;Vbat>=4.24结束充电
00DA   000C           00070         return
                      00071         ;延时30分钟--------------------------------------------
00DB                  00072 Delay30MinSbr:
00DB   8000           00073         call    InitCHGTmr
00DC   6627           00074         incr    TSec
00DD   3CF0           00075         movai   240
00DE   4827           00076         rsubar  TSec
00DF   E187           00077         jbset   C
00E0   000C           00078         return
00E1   7627           00079         clrr    TSec
00E2   6628           00080         incr    TMin
00E3   3C3C           00081         movai   60
00E4   4828           00082         rsubar  TMin
00E5   E187           00083         jbset   C
00E6   000C           00084         return
00E7   7628           00085         clrr    TMin
00E8   6629           00086         incr    T30Min
00E9   3C1E           00087         movai   30
00EA   4829           00088         rsubar  T30Min
00EB   E187           00089         jbset   C
00EC   000C           00090         return
00ED                  00091 CHGOverSbr:
00ED   C802           00092         bset    FCHGOver
00EE   DDA4           00093         bclr    PWM1OE
00EF   D794           00094         bclr    pCHG
00F0   000C           00095         return
                      00096         ;初始化PWM---------------------------------------------
00F1                  00097 InitCHGPWM:
00F1   DF88           00098         bclr    GIE
00F2   D38A           00099         bclr    T1IE
00F3   3C88           00100         movai   0x88
00F4   57A4           00101         movra   T1CR
00F5   3C64           00102         movai   CT1
00F6   57A6           00103         movra   T1LOAD
00F7   3C64           00104         movai   CT1;    ;初始化PWM
00F8   561E           00105         movra   CHGPWM
00F9   57A7           00106         movra   T1DATA
00FA   CDA4           00107         bset    PWM1OE
00FB   3C8F           00108         movai   0x8F
00FC   57A0           00109         movra   T0CR
00FD   3CFA           00110         movai   CT_2ms
00FE   57A2           00111         movra   T0LOAD
00FF   C18A           00112         bset    T0IE
0100   CF88           00113         bset    GIE
0101   000C           00114         return
                      00115         ;初始化计时--------------------------------------------
0102                  00116 InitCHGTmr:
0102   FC02           00117         jbclr   FCHGTmr
0103   000C           00118         return
0104   CC02           00119         bset    FCHGTmr
0105   7627           00120         clrr    TSec
0106   7628           00121         clrr    TMin
0107   7629           00122         clrr    T30Min
0108   000C           00123         return
                      00124         ;自动调节充电电流--------------------------------------
0109                  00125 CHGPWMSbr:
0109   3C02           00126         movai   2
010A   5605           00127         movra   Buf1
010B   7606           00128         clrr    Buf2
010C   3C49           00129         movai   low(CBATI1A)
010D   7E05           00130         addra   Buf1
010E   3C00           00131         movai   high(CBATI1A)
010F   1206           00132         adcra   Buf2
                      00133                         
0110   5805           00134         movar   Buf1
0111   4815           00135         rsubar  ADIOut
0112   5806           00136         movar   Buf2
0113   0C16           00137         rsbcar  ADIOut+1
0114   F187           00138         jbclr   C
0115   A000           00139         goto    DecCHGPWMSbr    ;ADIOut>CBATI1A+2
                      00140                         
0116   3C49           00141         movai   low(CBATI1A)
0117   5605           00142         movra   Buf1
0118   3C00           00143         movai   high(CBATI1A)
0119   5606           00144         movra   Buf2
011A   3C02           00145         movai   2
011B   4A05           00146         rsubra  Buf1
011C   7400           00147         clra
011D   0E06           00148         rsbcra  Buf2
                      00149                         
011E   5805           00150         movar   Buf1
011F   4815           00151         rsubar  ADIOut
0120   5806           00152         movar   Buf2
0121   0C16           00153         rsbcar  ADIOut+1
0122   E187           00154         jbset   C
0123   A000           00155         goto    INCCHGPWMSbr
0124   000C           00156         return                  ;ADIOut>=CBATI1A-2
                      00157         ;------------------------------------------------------
0125                  00158 DecCHGPWMSbr:
0125   6E1E           00159         decr    CHGPWM
0126   581E           00160         movar   CHGPWM
0127   F587           00161         jbclr   Z
0128   661E           00162         incr    CHGPWM
0129   57A7           00163         movra   T1DATA
012A   000C           00164         return
                      00165         ;------------------------------------------------------
012B                  00166 INCCHGPWMSbr:
012B   3C64           00167         movai   CT1
012C   481E           00168         rsubar  CHGPWM
012D   F187           00169         jbclr   C
012E   000C           00170         return
012F   661E           00171         incr    CHGPWM
0130                  00172 SetCHGPWMSbr:   
0130   581E           00173         movar   CHGPWM
0131   57A7           00174         movra   T1DATA
0132   000C           00175         return
                      00176 ;--------------------------------------------------------------
                      00177         ;放电状态----------------------------------------------
0133                  00178 IfDisCHGSbr:
0133   7626           00179         clrr    TStop5s
0134   D802           00180         bclr    FCHGOver
0135   DC02           00181         bclr    FCHGTmr
                      00182                 ;return
0136   EE03           00183         jbset   FDisCHGAD       ;;放电状态第一次完成AD转换
0137   000C           00184         return
0138   8000           00185         call    DisCHGSbr
0139   8000           00186         call    DisCHGChkSbr
013A   EA02           00187         jbset   FBig5V
013B   000C           00188         return
013C   3C08           00189         movai   8
013D   481D           00190         rsubar  DisCHGPWM
013E   F187           00191         jbclr   C
013F   000C           00192         return
0140   6625           00193         incr    VBig5VDly5s
0141   3C14           00194         movai   20
0142   4825           00195         rsubar  VBig5VDly5s
0143   E187           00196         jbset   C
0144   000C           00197         return
0145   A000           00198         goto    KeyShortSbr1
                      00199 ;--------------------------------------------------------------
                      00200 ;放电自动调整
0146                  00201 DisCHGSbr:
0146   3C93           00202         movai   COUTU5V+2
0147   4812           00203         rsubar  ADVOut+1
0148   F187           00204         jbclr   C
0149   A000           00205         goto    DisCHGSbr1      ;Vout>5V
014A   3C8F           00206         movai   COUTU5V-2
014B   4812           00207         rsubar  ADVOut+1
014C   F187           00208         jbclr   C
014D   000C           00209         return  
014E   DA02           00210         bclr    FBig5V          ;Vout<5V
014F   7625           00211         clrr    VBig5VDly5s
0150   5604           00212         movra   Buf0
0151   7204           00213         comr    Buf0            ;???
0152   3C76           00214         movai   CT0-10
0153   481D           00215         rsubar  DisCHGPWM
0154   F187           00216         jbclr   C
0155   A000           00217         goto    DisCHGSbrA
0156   3C0E           00218         movai   14
0157   4A04           00219         rsubra  Buf0
0158   E187           00220         jbset   C
0159   A000           00221         goto    DisCHGSbrA      ;差值小于14
015A   D187           00222         bclr    C
015B   4E04           00223         rrr     Buf0
015C   D187           00224         bclr    C
015D   4C04           00225         rrar    Buf0
015E   7E1D           00226         addra   DisCHGPWM
015F                  00227 DisCHGSbrA:
015F   661D           00228         incr    DisCHGPWM
0160   3C7D           00229         movai   CT0-3           
0161   481D           00230         rsubar  DisCHGPWM
0162   E187           00231         jbset   C
0163   A000           00232         goto    SetDisCHGSbr
0164   3C7D           00233         movai   CT0-3
0165   561D           00234         movra   DisCHGPWM
0166   A000           00235         goto    SetDisCHGSbr
                      00236         ;Vout>5V---------------------------------------
0167                  00237 DisCHGSbr1:
0167   CA02           00238         bset    FBig5V
0168   5604           00239         movra   Buf0
0169   3C0A           00240         movai   10
016A   481D           00241         rsubar  DisCHGPWM
016B   E187           00242         jbset   C
016C   A000           00243         goto    DisCHGSbr1A
016D   3C0E           00244         movai   14
016E   4A04           00245         rsubra  Buf0
016F   E187           00246         jbset   C
0170   A000           00247         goto    DisCHGSbr1A     ;差值小于14
0171   D187           00248         bclr    C
0172   4E04           00249         rrr     Buf0
0173   D187           00250         bclr    C
0174   4C04           00251         rrar    Buf0
0175   4A1D           00252         rsubra  DisCHGPWM
0176                  00253 DisCHGSbr1A:
0176   6E1D           00254         decr    DisCHGPWM
0177   F587           00255         jbclr   Z
0178   000C           00256         return
0179                  00257 SetDisCHGSbr:
0179   581D           00258         movar   DisCHGPWM
017A   57A3           00259         movra   T0DATA
017B   000C           00260         return
                      00261         ;输出电压大于5V,或电流>2.5A,或者电流<100mA----------------
                      00262         ;停止输出
                      00263 ;-----------------------------------------------------------------
017C                  00264 DisCHGChkSbr:
017C   3C02           00265         movai   COUT100mA
017D   4815           00266         rsubar  ADIOut
017E   E187           00267         jbset   C
017F   A000           00268         goto    DisCHGChkSbr1
0180   7624           00269         clrr    ILow0A1Dly5s    ;>100mA
0181   000C           00270         return
0182                  00271 DisCHGChkSbr1:          ;<100mA
0182   6624           00272         incr    ILow0A1Dly5s
0183   3C14           00273         movai   20              
0184   4824           00274         rsubar  ILow0A1Dly5s
0185   E187           00275         jbset   C
0186   000C           00276         return                  ;小于5s
0187   A000           00277         goto    KeyShortSbr1
                      00278         
                      00039 #include  "DisplaySbr.asm"
0188                  00001 DisplaySbr:
                      00002                         ;movai  0x02
                      00003                         ;xorra  P0
                      00004         ;return
0188   D995           00005         bclr    pLed1C
0189   DB95           00006         bclr    pLed2C
018A   C991           00007         bset    pLedCC
018B   FE02           00008         jbclr   FVIN
018C   A000           00009         goto    DisplaySbr0
018D   F002           00010         jbclr   FPwr
018E   A000           00011         goto    DisplaySbr0
018F   000C           00012         return
0190                  00013 DisplaySbr0:
0190   661C           00014         incr    DispCnt
0191   581C           00015         movar   DispCnt
0192   5605           00016         movra   Buf1
0193   6A05           00017         djzr    Buf1
0194   A000           00018         goto    DisplaySbr2
                      00019         ;------------------------------------------------------
0195                  00020 DisplaySbr1:
0195   5A1B           00021         movr    BatStatus
0196   E587           00022         jbset   Z
0197   A000           00023         goto    DisplaySbr11    ;>3.5V
0198   F402           00024         jbclr   FFlash
0199   A000           00025         goto    DisplaySbr11    ;
019A   FE02           00026         jbclr   FVIN
019B   A000           00027         goto    DisplaySbr11    ;
019C   000C           00028         return
019D                  00029 DisplaySbr11:
019D   D990           00030         bclr    pLedC
019E   C995           00031         bset    pLed1C
019F   C994           00032         bset    pLed1
01A0   000C           00033         return
                      00034         ;------------------------------------------------------
01A1                  00035 DisplaySbr2:
01A1   6A05           00036         djzr    Buf1
01A2   A000           00037         goto    DisplaySbr3
01A3   3C01           00038         movai   1
01A4   481B           00039         rsubar  BatStatus
01A5   F587           00040         jbclr   Z
01A6   A000           00041         goto    DisplaySbr21
01A7   E187           00042         jbset   C
01A8   000C           00043         return
01A9   A000           00044         goto    DisplaySbr22
01AA                  00045 DisplaySbr21:
01AA   F402           00046         jbclr   FFlash
01AB   A000           00047         goto    DisplaySbr22
01AC   FE02           00048         jbclr   FVIN
01AD   A000           00049         goto    DisplaySbr22
01AE   000C           00050         return
01AF                  00051 DisplaySbr22:
01AF   C990           00052         bset    pLedC
01B0   C995           00053         bset    pLed1C
01B1   D994           00054         bclr    pLed1
01B2   000C           00055         return
                      00056         ;------------------------------------------------------
01B3                  00057 DisplaySbr3:
01B3   6A05           00058         djzr    Buf1
01B4   A000           00059         goto    DisplaySbr4
01B5   3C02           00060         movai   2
01B6   481B           00061         rsubar  BatStatus
01B7   F587           00062         jbclr   Z
01B8   A000           00063         goto    DisplaySbr31
01B9   E187           00064         jbset   C
01BA   000C           00065         return
01BB   A000           00066         goto    DisplaySbr32
01BC                  00067 DisplaySbr31:
01BC   F402           00068         jbclr   FFlash
01BD   A000           00069         goto    DisplaySbr32
01BE   FE02           00070         jbclr   FVIN
01BF   A000           00071         goto    DisplaySbr32
01C0   000C           00072         return
01C1                  00073 DisplaySbr32:
01C1   C990           00074         bset    pLedC
01C2   CB95           00075         bset    pLed2C
01C3   DB94           00076         bclr    pLed2
01C4   000C           00077         return
                      00078         ;------------------------------------------------------
01C5                  00079 DisplaySbr4:
01C5   6A05           00080         djzr    Buf1
01C6   A000           00081         goto    DisplaySbr5
01C7   3C03           00082         movai   3
01C8   481B           00083         rsubar  BatStatus
01C9   F587           00084         jbclr   Z
01CA   A000           00085         goto    DisplaySbr41
01CB   E187           00086         jbset   C
01CC   000C           00087         return
01CD   A000           00088         goto    DisplaySbr42
01CE                  00089 DisplaySbr41:
01CE   F402           00090         jbclr   FFlash
01CF   A000           00091         goto    DisplaySbr42
01D0   FE02           00092         jbclr   FVIN
01D1   A000           00093         goto    DisplaySbr42
01D2   000C           00094         return
01D3                  00095 DisplaySbr42:
01D3   D990           00096         bclr    pLedC
01D4   CB95           00097         bset    pLed2C
01D5   CB94           00098         bset    pLed2
01D6   000C           00099         return
01D7                  00100 DisplaySbr5:
01D7   761C           00101         clrr    DispCnt
01D8   000C           00102         return
                      00103         
                      00040 #include  "ADCSbr.asm"
                      00001 ;----------------------------------------------------------     
                      00002 ;转换不同通道
                      00003 ;----------------------------------------------------------     
01D9                  00004 ADChnlSbr:
01D9   C1B0           00005         bset    ADON
                      00006         ;movar  ADChnlCnt
                      00007         ;movra  Buf1
                      00008         ;decr   Buf1
                      00009         ;jbclr  Z
                      00010         ;goto   VBatStartSbr
                      00011         ;decr   Buf1
                      00012         ;jbclr  Z
                      00013         ;goto   VOutStartSbr
01DA                  00014 IOutStartSbr:
01DA   3C13           00015         movai   ADIOutBuf       
01DB   5784           00016         movra   FSR0
01DC   3C3E           00017         movai   CADIOut
01DD   8000           00018         call    ADStartSbr
01DE   3C0F           00019         movai   0x0F
01DF   79B5           00020         andar   ADRL
01E0   5604           00021         movra   Buf0
01E1   3C06           00022         movai   low(COUT2A8)
01E2   4804           00023         rsubar  Buf0
01E3   3C06           00024         movai   high(COUT2A8)
01E4   0DB4           00025         rsbcar  ADRH
01E5   F187           00026         jbclr   C
01E6   8000           00027         call    KeyShortSbr1
01E7                  00028 VBatStartSbr:
01E7   3C0B           00029         movai   ADVBatBuf       
01E8   5784           00030         movra   FSR0
01E9   3C0E           00031         movai   CADVBat
01EA   8000           00032         call    ADStartSbr
01EB                  00033 VOutStartSbr:
01EB   3C0F           00034         movai   ADVOutBuf       
01EC   5784           00035         movra   FSR0
01ED   3C2E           00036         movai   CADVOut
01EE                  00037 ADStartSbr:
01EE   57B0           00038         movra   ADCR0
01EF   C1B0           00039         bset    ADON
01F0   D3B0           00040         bclr    ADEOC
01F1                  00041 ADStartSbr0:
01F1   E3B0           00042         jbset   ADEOC
01F2   A000           00043         goto    ADStartSbr0
01F3   59B5           00044         movar   ADRL
01F4   5605           00045         movra   Buf1
01F5   45B4           00046         swapar  ADRH
01F6   5606           00047         movra   Buf2
01F7   3EF0           00048         andai   0xf0
01F8   5E05           00049         orra    Buf1
01F9   3C0F           00050         movai   0x0f
01FA   7A06           00051         andra   Buf2
01FB   5805           00052         movar   Buf1
01FC   7F80           00053         addra   INDF0
01FD   6784           00054         incr    FSR0
01FE   5806           00055         movar   Buf2
01FF   1380           00056         adcra   INDF0
0200   000C           00057         return
                      00058 ;---------------------------------------------------------
0201                  00059 ADCSbr:
                      00060         ;incr   ADChnlCnt
                      00061         ;movai  4
                      00062         ;rsubar ADChnlCnt
                      00063         ;jbset  C
                      00064         ;goto   ADChnlSbr
                      00065         ;clrr   ADChnlCnt
                      00066         
0201   8000           00067         call    ADChnlSbr
0202   660A           00068         incr    ADCnt
0203   3C10           00069         movai   16
0204   480A           00070         rsubar  ADCnt
0205   E187           00071         jbset   C
0206   000C           00072         return
0207   760A           00073         clrr    ADCnt
0208   580B           00074         movar   ADVBatBuf
0209   560D           00075         movra   ADVBat
020A   580C           00076         movar   ADVBatBuf+1
020B   560E           00077         movra   ADVBat+1
                      00078 
020C   580F           00079         movar   ADVOutBuf
020D   5611           00080         movra   ADVOut
020E   5810           00081         movar   ADVOutBuf+1
020F   5612           00082         movra   ADVOut+1
                      00083         
                      00084         ;movar  ADIOutBuf
                      00085         ;movra  ADIOut
                      00086         ;movar  ADIOutBuf+1
                      00087         ;movra  ADIOut+1
0210   4614           00088         swapr   ADIOutBuf+1
0211   4613           00089         swapr   ADIOutBuf
0212   3C0F           00090         movai   0x0F
0213   7A13           00091         andra   ADIOutBuf
0214   3CF0           00092         movai   0XF0
0215   7814           00093         andar   ADIOutBuf+1
0216   5C13           00094         orar    ADIOutBuf
0217   5615           00095         movra   ADIOut
0218   3C0F           00096         movai   0X0F
0219   7814           00097         andar   ADIOutBuf+1
021A   5616           00098         movra   ADIOut+1
                      00099         
021B   CE03           00100         bset    FDisCHGAD
021C   760B           00101         clrr    ADVBatBuf
021D   760C           00102         clrr    ADVBatBuf+1
021E   760F           00103         clrr    ADVOutBuf
021F   7610           00104         clrr    ADVOutBuf+1
0220   7613           00105         clrr    ADIOutBuf
0221   7614           00106         clrr    ADIOutBuf+1
                      00107 
0222                  00108 BatVoltSbr:                     
0222   3CA0           00109         movai   CBATU350
0223   480E           00110         rsubar  ADVBat+1
0224   F187           00111         jbclr   C
0225   A000           00112         goto    BatStatusSbr1
                      00113         ;<=3.50V--------------------------------------------
0226   7400           00114         clra
0227   A000           00115         goto    BatStatusSbr41
                      00116         ;<=3.75V--------------------------------------------
0228                  00117 BatStatusSbr1:
0228   3CAB           00118         movai   CBATU375
0229   480E           00119         rsubar  ADVBat+1
022A   F187           00120         jbclr   C
022B   A000           00121         goto    BatStatusSbr2
022C   3C01           00122         movai   1
022D   A000           00123         goto    BatStatusSbr41
                      00124         ;<=4.00V--------------------------------------------
022E                  00125 BatStatusSbr2:
022E   3CB7           00126         movai   CBATU400
022F   480E           00127         rsubar  ADVBat+1
0230   F187           00128         jbclr   C
0231   A000           00129         goto    BatStatusSbr3
0232   3C02           00130         movai   2
0233   A000           00131         goto    BatStatusSbr41
                      00132         ;<4.16V---------------------------------------------
0234                  00133 BatStatusSbr3:
0234   3CBE           00134         movai   CBATU416
0235   480E           00135         rsubar  ADVBat+1
0236   F187           00136         jbclr   C
0237   A000           00137         goto    BatStatusSbr4
0238   3C03           00138         movai   3
0239   A000           00139         goto    BatStatusSbr41
                      00140         ;>=4.16V--------------------------------------------
023A                  00141 BatStatusSbr4:
023A   3C04           00142         movai   4
023B                  00143 BatStatusSbr41:
023B   5604           00144         movra   Buf0
023C   F002           00145         jbclr   FPwr
023D   A000           00146         goto    BatStatusSbr5
023E   EE02           00147         jbset   FVIN
023F   A000           00148         goto    BatStatusSbr51
0240   481B           00149         rsubar  BatStatus
0241   E187           00150         jbset   C
0242   A000           00151         goto    BatStatusSbr51
0243   000C           00152         return
0244                  00153 BatStatusSbr5:
0244   481B           00154         rsubar  BatStatus
0245   E187           00155         jbset   C
0246   000C           00156         return
0247                  00157 BatStatusSbr51:
0247   5804           00158         movar   Buf0
0248   561B           00159         movra   BatStatus
0249   000C           00160         return
                      00161 ;----------------------------------------------------------     
                      00162 ;AD转换成温度
                      00163 ;Vref = 3V
                      00164 ;----------------------------------------------------------     
024A                  00165 ADCovTempSbr:
024A   5784           00166         movra   FSR0
024B   3C06           00167         movai   6
024C   5605           00168         movra   Buf1
024D   5980           00169         movar   INDF0
024E   5606           00170         movra   Buf2
024F   8000           00171         call    MulSbr
                      00172         
0250   5983           00173         movar   HIBYTE
0251   5606           00174         movra   Buf2
0252   5804           00175         movar   Buf0
0253   5605           00176         movra   Buf1
0254   3CFF           00177         movai   0xFF
0255   5604           00178         movra   Buf0
0256   8000           00179         call    DIV16Sbr
0257   3C02           00180         movai   2
0258   7F84           00181         addra   FSR0
0259   4583           00182         swapar  HIBYTE
025A   5780           00183         movra   INDF0
025B   3CF0           00184         movai   0xF0
025C   7B80           00185         andra   INDF0
025D   3C0A           00186         movai   10
025E   5605           00187         movra   Buf1
025F   8000           00188         call    MulSbr
0260   5983           00189         movar   HIBYTE
0261   5F80           00190         orra    INDF0
0262   5804           00191         movar   Buf0
0263   5606           00192         movra   Buf2
0264   8000           00193         call    MulSbr
0265   4583           00194         swapar  HIBYTE
0266   6F84           00195         decr    FSR0
0267   5780           00196         movra   INDF0
0268   5804           00197         movar   Buf0
0269   5606           00198         movra   Buf2
026A   8000           00199         call    MulSbr
026B   3C05           00200         movai   5
026C   4983           00201         rsubar  HIBYTE
026D   E187           00202         jbset   C
026E   000C           00203         return
026F   3C10           00204         movai   0x10
0270   7D80           00205         addar   INDF0
0271   000A           00206         daa
0272   5780           00207         movra   INDF0
0273   7400           00208         clra
0274   6784           00209         incr    FSR0
0275   7F80           00210         addra   INDF0
0276   000C           00211         return
                      00212 ;----------------------------------------------------------     
                      00213 ;Buf2:Buf1/Buf0 ==> HIBYTE,Buf2
                      00214 ;----------------------------------------------------------     
0277                  00215 DIV16Sbr:
0277   3C08           00216         movai   8
0278   5785           00217         movra   FSR1
0279                  00218 DIV16Sbr0:      
0279   D187           00219         bclr    C
027A   5383           00220         rlr     HIBYTE
027B   D187           00221         bclr    C
027C   5205           00222         rlr     Buf1
027D   5206           00223         rlr     Buf2
027E   F187           00224         jbclr   C
027F   A000           00225         goto    SubSbr  
0280   5804           00226         movar   Buf0
0281   4A06           00227         rsubra  Buf2
0282   F187           00228         jbclr   C
0283   A000           00229         goto    DIV16Sbr1
0284   5804           00230         movar   Buf0
0285   7E06           00231         addra   Buf2
0286   A000           00232         goto    DIV16Sbr2
0287                  00233 DIV16Sbr1:
0287   6783           00234         incr    HIBYTE
0288                  00235 DIV16Sbr2:
0288   6B85           00236         djzr    FSR1
0289   A000           00237         goto    DIV16Sbr0
028A   000C           00238         return
028B                  00239 SubSbr:         
028B   5804           00240         movar   Buf0
028C   4A06           00241         rsubra  Buf2
028D   A000           00242         goto    DIV16Sbr1
                      00243 ;----------------------------------------------------------     
                      00244 ;Buf2*Buf1 ==> HIBYTE:Buf0,Buf1不变
                      00245 ;----------------------------------------------------------     
028E                  00246 MulSbr:
028E   3C08           00247         movai   8
028F   5785           00248         movra   FSR1
0290   7783           00249         clrr    HIBYTE
0291   7604           00250         clrr    Buf0
0292                  00251 MulSbr0:        
0292   D187           00252         bclr    C
0293   5204           00253         rlr     Buf0
0294   5383           00254         rlr     HIBYTE
                      00255         
0295   5206           00256         rlr     Buf2
0296   E187           00257         jbset   C
0297   A000           00258         goto    MulSbr1
0298   5805           00259         movar   Buf1
0299   7E04           00260         addra   Buf0
029A   7400           00261         clra
029B   1383           00262         adcra   HIBYTE
029C                  00263 MulSbr1:        
029C   6B85           00264         djzr    FSR1
029D   A000           00265         goto    MulSbr0
029E   000C           00266         return
                      00267 
                      00268         
                      00041 #include  "TM1628.asm"
                      00001 #include  "TM1628.H"
                      00073 LIST
                      00074 
                      00002 
                      00003 ;向TM1628发送8位数据,从低位开始------------------------ 
                      00004 ;IN:    DispBuf
                      00005 ;Used:  Buf1,Buf2
                      00006 ;------------------------------------------------------
029F                  00007 SendByteSbr:            ;(uchar dat) 
029F   3C01           00008         movai   0x01
02A0   5605           00009         movra   Buf1
02A1                  00010 SendByteSbr0:
02A1   CB94           00011         bset    pDIO
02A2   5805           00012         movar   Buf1
02A3   782B           00013         andar   DispBuf
02A4   E587           00014         jbset   Z
02A5   A000           00015         goto    SendByteSbr1
02A6   DB94           00016         bclr    pDIO
02A7   0000           00017         nop
02A8   0000           00018         nop
02A9                  00019 SendByteSbr1:
02A9   D994           00020         bclr    pCLK
02AA   D187           00021         bclr    C
02AB   5205           00022         rlr     Buf1
02AC   C994           00023         bset    pCLK
                      00024         
02AD   5A05           00025         movr    Buf1
02AE   E587           00026         jbset   Z
02AF   A000           00027         goto    SendByteSbr0
02B0   000C           00028         return
                      00029  
                      00030 ;//向TM1628发送命令-------------------------------------- 
02B1                  00031 CommandSbr:             ;(uchar com) 
02B1   562B           00032         movra   DispBuf
02B2   DB96           00033         bclr    PUP1,5
02B3   CB95           00034         bset    cDIO
02B4   C995           00035         bset    cCLK
02B5   C991           00036         bset    cSTB
02B6   C994           00037         bset    pCLK
02B7   C990           00038         bset    pSTB
02B8   0000           00039         nop
02B9   0000           00040         nop
02BA   D990           00041         bclr    pSTB
02BB   A000           00042         goto    SendByteSbr
                      00043 ;---------------------------------------------------------
02BC                  00044 SendDataSbr:
02BC   3C03           00045         movai   0x03
02BD   8000           00046         call    CommandSbr      ;//设置显示模式，7位10段模式 
02BE   3C40           00047         movai   0x40
02BF   8000           00048         call    CommandSbr      ;//设置数据命令,采用地址自动加1模式 
02C0   3CC0           00049         movai   0xc0
02C1   8000           00050         call    CommandSbr;    //设置显示地址，从00H开始 
02C2   3C2C           00051         movai   DispData
02C3   5784           00052         movra   FSR0
02C4                  00053 SendDataSbr0:
02C4   5980           00054         movar   INDF0
02C5   562B           00055         movra   DispBuf         ;//从00H起，偶数地址送显示数据 
02C6   8000           00056         call    SendByteSbr
02C7   762B           00057         clrr    DispBuf         ;//因为SEG9-14均未用到，所以奇数地址送全“0” 
02C8   8000           00058         call    SendByteSbr
02C9   6784           00059         incr    FSR0
02CA   3C30           00060         movai   DispData+4
02CB   4984           00061         rsubar  FSR0
02CC   E587           00062         jbset   Z
02CD   A000           00063         goto    SendDataSbr0
                      00064 
02CE   3C8A           00065         movai   CLIGHT2
02CF   8000           00066         call    CommandSbr;    //显示亮度控制命令
                      00067  
02D0   C990           00068         bset    pSTB
02D1   000C           00069         return
                      00070 
                      00071 ;//读取按键值并存入KEY[]数组，从低字节开始，从低位开始---- 
                      00072 
02D2                  00073 RD1628KeySbr:
02D2   3C42           00074         movai   0x42
02D3   8000           00075         call    CommandSbr      ;//读键盘命令 
02D4   CB94           00076         bset    pDIO            ;//将DIO置高 
02D5   CB96           00077         bset    PUP1,5
02D6   DB95           00078         bclr    cDIO            ;DIOInput();
                      00079         
02D7   3C30           00080         movai   KeyData
02D8   5784           00081         movra   FSR0
02D9                  00082 RD1628KeySbr0:  
02D9   3C08           00083         movai   8
02DA   5606           00084         movra   Buf2
02DB                  00085 RD1628KeySbr1:  
02DB   D187           00086         bclr    C
02DC   4F80           00087         rrr     INDF0
02DD   D994           00088         bclr    pCLK
02DE   0000           00089         nop
02DF   0000           00090         nop
02E0   C994           00091         bset    pCLK
02E1   0000           00092         nop
02E2   0000           00093         nop
02E3   EB94           00094         jbset   pDIO
02E4   A000           00095         goto    RD1628KeySbr2
02E5   3C80           00096         movai   0x80
02E6   5F80           00097         orra    INDF0
02E7                  00098 RD1628KeySbr2:  
02E7   6A06           00099         djzr    Buf2
02E8   A000           00100         goto    RD1628KeySbr1
02E9   6784           00101         incr    FSR0
02EA   3C35           00102         movai   KeyData+5
02EB   4984           00103         rsubar  FSR0
02EC   E587           00104         jbset   Z
02ED   A000           00105         goto    RD1628KeySbr0
02EE   C990           00106         bset    pSTB
                      00107                 
02EF   D187           00108         bclr    C
02F0   5232           00109         rlr     KeyData+2
02F1   D187           00110         bclr    C
02F2   5032           00111         rlar    KeyData+2
02F3   5E31           00112         orra    KeyData+1
02F4   D187           00113         bclr    C
02F5   5033           00114         rlar    KeyData+3
02F6   5C31           00115         orar    KeyData+1
                      00116         ;key[1] |= key[2]<<2;
                      00117         ;key[1] |= key[3]<<1;
02F7   000C           00118         return
                      00119 ;-------------------------------------------------------------
02F8                  00120 Key1628Sbr:
02F8   8000           00121         call    RD1628KeySbr
02F9   F587           00122         jbclr   Z
02FA   A000           00123         goto    FrstKey1628Sbr
02FB   562A           00124         movra   KeyBuf1628
02FC   4835           00125         rsubar  KeyCode1628
02FD   E587           00126         jbset   Z
02FE   A000           00127         goto    FrstKey1628Sbr
02FF   F803           00128         jbclr   FKeyAck1628
0300   000C           00129         return
0301   6636           00130         incr    KeyCnt1628
0302   3C05           00131         movai   5
0303   4836           00132         rsubar  KeyCnt1628
0304   E187           00133         jbset   C
0305   000C           00134         return
0306   C803           00135         bset    FKeyAck1628
0307   3C02           00136         movai   CKEY1
0308   4835           00137         rsubar  KeyCode1628
0309   F587           00138         jbclr   Z
030A   A000           00139         goto    Key1Sbr
030B   3C20           00140         movai   CKEY2
030C   4835           00141         rsubar  KeyCode1628
030D   F587           00142         jbclr   Z
030E   A000           00143         goto    Key2Sbr
030F   3C04           00144         movai   CKEY3
0310   4835           00145         rsubar  KeyCode1628
0311   F587           00146         jbclr   Z
0312   A000           00147         goto    Key3Sbr
                      00148         ;movai  CKEY4
                      00149         ;rsubar KeyCode1628
                      00150         ;jbclr  Z
                      00151         ;goto   Key4Sbr
0313   3C01           00152         movai   CKEY5
0314   4835           00153         rsubar  KeyCode1628
0315   F587           00154         jbclr   Z
0316   A000           00155         goto    Key5Sbr
0317   000C           00156         return
                      00157         ;---------------------------------------------------
0318                  00158 Key1Sbr:
0318   6637           00159         incr    DispCnt1628
0319   3C05           00160         movai   5
031A   4837           00161         rsubar  DispCnt1628
031B   F187           00162         jbclr   C
031C   7637           00163         clrr    DispCnt1628
031D   000C           00164         return
                      00165         ;---------------------------------------------------
031E                  00166 Key2Sbr:
031E   3C03           00167         movai   3
031F   4837           00168         rsubar  DispCnt1628
0320   F587           00169         jbclr   Z
0321   A000           00170         goto    Key2DisCHG
0322   3C04           00171         movai   4
0323   4837           00172         rsubar  DispCnt1628
0324   E587           00173         jbset   Z
0325   000C           00174         return
0326   661E           00175         incr    CHGPWM
0327   581E           00176         movar   CHGPWM
0328   57A7           00177         movra   T1DATA
0329   000C           00178         return
032A                  00179 Key2DisCHG:
032A   661D           00180         incr    DisCHGPWM
032B   581D           00181         movar   DisCHGPWM
032C   57A3           00182         movra   T0DATA
032D   000C           00183         return
                      00184         ;---------------------------------------------------
032E                  00185 Key3Sbr:
032E   3C03           00186         movai   3
032F   4837           00187         rsubar  DispCnt1628
0330   F587           00188         jbclr   Z
0331   A000           00189         goto    Key3DisCHG
0332   3C04           00190         movai   4
0333   4837           00191         rsubar  DispCnt1628
0334   E587           00192         jbset   Z
0335   000C           00193         return
0336   6E1E           00194         decr    CHGPWM
0337   581E           00195         movar   CHGPWM
0338   57A7           00196         movra   T1DATA
0339   000C           00197         return
033A                  00198 Key3DisCHG:
033A   6E1D           00199         decr    DisCHGPWM
033B   581D           00200         movar   DisCHGPWM
033C   57A3           00201         movra   T0DATA
033D   000C           00202         return
                      00203         ;movai  CStopTmr
                      00204         ;xorra  Flag2
                      00205         ;return
                      00206         ;goto   KeyLongthSbr0
033E                  00207 Key5Sbr:
033E   A000           00208         goto    KeyShortSbr
                      00209         ;return
                      00210         ;-----------------------------------------------------
033F                  00211 FrstKey1628Sbr:
033F   7636           00212         clrr    KeyCnt1628
0340   D803           00213         bclr    FKeyAck1628
0341   582A           00214         movar   KeyBuf1628
0342   5635           00215         movra   KeyCode1628
0343   000C           00216         return
                      00217 ;-------------------------------------------------------------
0344                  00218 Disp1628Sbr:
                      00219         ;goto   SendDataSbr
0344   762C           00220         clrr    DispData+DIGH
0345   762D           00221         clrr    DispData+DIGMH
0346   762E           00222         clrr    DispData+DIGML
0347   762F           00223         clrr    DispData+DIGL
                      00224         
0348   5837           00225         movar   DispCnt1628
0349   F587           00226         jbclr   Z
034A   A000           00227         goto    Disp1628batSbr
034B   5605           00228         movra   Buf1
034C   6A05           00229         djzr    Buf1
034D   A000           00230         goto    Disp1628Sbr1
034E   A000           00231         goto    Disp1628VOutSbr
034F                  00232 Disp1628Sbr1:
034F   6A05           00233         djzr    Buf1
0350   A000           00234         goto    Disp1628Sbr2
0351   A000           00235         goto    Disp1628IOutSbr
0352                  00236 Disp1628Sbr2:
0352   6A05           00237         djzr    Buf1
0353   A000           00238         goto    DispPWMCHGSbr
0354   A000           00239         goto    DispPWMDisCHGSbr
0355                  00240 Disp1628IOutSbr:
0355   3C04           00241         movai   SegC
0356   562C           00242         movra   DispData+DIGH
                      00243         ;movai  ADIOut
                      00244         ;goto   Disp1628Sbr21
0357   3C0F           00245         movai   0x0F
0358   7815           00246         andar   ADIOut
0359   8000           00247         call    RDDigTbl
035A   562F           00248         movra   DispData+DIGL
035B   3CF0           00249         movai   0xF0
035C   7815           00250         andar   ADIOut
035D   5604           00251         movra   Buf0
035E   4404           00252         swapar  Buf0
035F   8000           00253         call    RDDigTbl
0360   562E           00254         movra   DispData+DIGML
0361   3C0F           00255         movai   0x0F
0362   7816           00256         andar   ADIOut+1
0363   8000           00257         call    RDDigTbl
0364   562D           00258         movra   DispData+DIGMH
0365   A000           00259         goto    SendDataSbr
                      00260         
0366                  00261 Disp1628batSbr:
0366   3CAD           00262         movai   DLetterb
0367   562C           00263         movra   DispData+DIGH
0368   3C0D           00264         movai   ADVBat
0369   A000           00265         goto    Disp1628Sbr21
036A                  00266 Disp1628VOutSbr:
036A   3C85           00267         movai   DLetterV
036B   562C           00268         movra   DispData+DIGH
036C   3C11           00269         movai   ADVOut
036D   A000           00270         goto    Disp1628Sbr21
036E                  00271 DispPWMCHGSbr:
036E   3CF5           00272         movai   DZero
036F   562D           00273         movra   DispData+DIGMH
0370   581E           00274         movar   CHGPWM
0371                  00275 DispPWMCHGSbr1:
0371   5604           00276         movra   Buf0
0372   8000           00277         call    RDDigTbl
0373   562F           00278         movra   DispData+DIGL
0374   4404           00279         swapar  Buf0
0375   8000           00280         call    RDDigTbl
0376   562E           00281         movra   DispData+DIGML
0377   3CF8           00282         movai   DLetterP
0378   562C           00283         movra   DispData+DIGH
0379   A000           00284         goto    SendDataSbr
037A                  00285 DispPWMDisCHGSbr:
037A   3C14           00286         movai   DOne
037B   562D           00287         movra   DispData+DIGMH
037C   581D           00288         movar   DisCHGPWM
037D   A000           00289         goto    DispPWMCHGSbr1
037E                  00290 Disp1628Sbr21:
037E   8000           00291         call    DIGCovSbr
037F   A000           00292         goto    SendDataSbr
                      00293         
                      00294         ;--------------------------------------------
0380                  00295 DIGCovSbr:
0380   5784           00296         movra   FSR0
                      00297         ;jbclr  FDispAD
                      00298         ;goto   DIGCovSbr1
                      00299         ;movai  2
                      00300         ;addra  FSR0
0381                  00301 DIGCovSbr1:
0381   5980           00302         movar   INDF0
0382   5605           00303         movra   Buf1            ;lower
0383   6784           00304         incr    FSR0
0384   5980           00305         movar   INDF0
0385   5606           00306         movra   Buf2            ;high
0386   4406           00307         swapar  Buf2
0387   8000           00308         call    RDDigTbl
0388   562D           00309         movra   DispData+DIGMH
0389   5806           00310         movar   Buf2
038A   8000           00311         call    RDDigTbl
038B   562E           00312         movra   DispData+DIGML
038C   4405           00313         swapar  Buf1
038D   8000           00314         call    RDDigTbl
038E   562F           00315         movra   DispData+DIGL
038F   000C           00316         return
                      00317         
0390                  00318 RDDigTbl:
0390   5604           00319         movra   Buf0
                      00320         ;movai  High(DigTbl)
                      00321         ;movra  FSR1
0391   7785           00322         clrr    FSR1
0392   3C00           00323         movai   Low(DigTbl)
0393   5784           00324         movra   FSR0
0394   3C0F           00325         movai   0x0f
0395   7804           00326         andar   Buf0
0396   D187           00327         bclr    C
0397   0015           00328         rra
0398   7F84           00329         addra   FSR0
0399   7400           00330         clra
039A   1385           00331         adcra   FSR1
039B   5989           00332         movar   INDF3
039C   E004           00333         jbset   Buf0,0
039D   5983           00334         movar   HIBYTE
039E   000C           00335         return
                      00336         
                      00337         
                      00042 ;复位---------------------------------------------------------
039F                  00043 RSET:
039F   778A           00044         clrr    INTE            ;关中断
03A0   000E           00045         clrwdt
03A1   8000           00046         call    InitialSys      
03A2   8000           00047         call    InitalRAM
                      00048         
03A3                  00049 test0:          
                      00050                 ;call   DisCHGSbr
                      00051                 ;goto   test0
03A3                  00052 RSET0:  
03A3   DA03           00053         bclr    F1628
03A4   FD94           00054         jbclr   pKey
03A5   A000           00055         goto    RSET1
03A6   6604           00056         incr    Buf0
03A7   3C32           00057         movai   50
03A8   4804           00058         rsubar  Buf0
03A9   E187           00059         jbset   C
03AA   A000           00060         goto    RSET0
03AB   CA03           00061                 bset    F1628
03AC                  00062 RSET1:  
03AC   CF88           00063         bset    GIE       
03AD                  00064 Start:  
                      00065         ;goto   Start5msSbr
03AD   E203           00066         jbset   FStop
03AE   A000           00067         goto    Start5msSbr
03AF   C78A           00068         bset    INT1IE
03B0   CD97           00069         bset    KBIM6
03B1   C98A           00070         bset    KBIE
03B2   0000           00071         nop
03B3   0000           00072         nop
03B4   0000           00073         nop
03B5   000B           00074         stop
03B6   0000           00075         nop
03B7   0000           00076         nop
03B8   0000           00077         nop
03B9   D203           00078         bclr    FStop
03BA   D78A           00079         bclr    INT1IE
03BB   C38A           00080         bset    T1IE
                      00081         ;5ms程序-----------------------------------------------
03BC                  00082 Start5msSbr:
03BC   E403           00083         jbset   F2ms
03BD   A000           00084         goto    Start   
03BE   D403           00085         bclr    F2ms
03BF   000E           00086         clrwdt
03C0   8000           00087         call    ADCSbr
03C1   5A07           00088         movr    PwrDly
03C2   F587           00089         jbclr   Z
03C3   A000           00090         goto    Start5msSbr1
03C4   6E07           00091         decr    PwrDly
03C5   A000           00092         goto    Start
                      00093         ;上电延时结束------------------------------------------
03C6                  00094 Start5msSbr1:
03C6   FA03           00095         jbclr   F1628
03C7   A000           00096         goto    Start5msSbr10
03C8   8000           00097         call    DisplaySbr
03C9   8000           00098         call    KeySbr
03CA   A000           00099         goto    Start5msSbr11
03CB                  00100 Start5msSbr10:
03CB   8000           00101         call    Disp1628Sbr
03CC   8000           00102         call    Key1628Sbr
03CD                  00103 Start5msSbr11:
03CD   F394           00104         jbclr   pVIN
03CE   A000           00105         goto    InputSbr
03CF   7621           00106         clrr    VinHiCnt
03D0   6620           00107         incr    VinLowCnt
03D1   3C14           00108         movai   20
03D2   4820           00109         rsubar  VinLowCnt
03D3   F187           00110         jbclr   C
03D4   DE02           00111         bclr    FVIN
03D5   D802           00112         bclr    FCHGOver
03D6   A000           00113         goto    Start5msSbr2
03D7                  00114 InputSbr:
03D7   7620           00115         clrr    VinLowCnt
03D8   6621           00116         incr    VinHiCnt
03D9   3C14           00117         movai   20
03DA   4821           00118         rsubar  VinHiCnt
03DB   F187           00119         jbclr   C
03DC   CE02           00120         bset    FVIN
                      00121         ;goto   Start5msSbr2
                      00122 
                      00123         ;------------------------------------------------------
03DD                  00124 Start5msSbr2:
03DD   6E17           00125         decr    T250ms
03DE   F587           00126         jbclr   Z
03DF   8000           00127         call    T250msSbr
03E0   A000           00128         goto    Start
                      00129         END
gpasm-0.9.0 (Mar 19 2013)    YDDY3221.asm       2013-6-19  10:08:11          PAGE  2


SYMBOL TABLE
  LABEL                             VALUE

.code                             00000000
ABuf                              00000000
ADCR0                             000001B0
ADCR1                             000001B1
ADCSbr                            00000201
ADChnlCnt                         00000009
ADChnlSbr                         000001D9
ADCnt                             0000000A
ADCovTempSbr                      0000024A
ADIOut                            00000015
ADIOutBuf                         00000013
ADRH                              000001B4
ADRL                              000001B5
ADStartSbr                        000001EE
ADStartSbr0                       000001F1
ADVBat                            0000000D
ADVBatBuf                         0000000B
ADVOut                            00000011
ADVOutBuf                         0000000F
ANSEL                             00000193
Bat                               00000038
BatStatus                         0000001B
BatStatusSbr1                     00000228
BatStatusSbr2                     0000022E
BatStatusSbr3                     00000234
BatStatusSbr4                     0000023A
BatStatusSbr41                    0000023B
BatStatusSbr5                     00000244
BatStatusSbr51                    00000247
BatVoltSbr                        00000222
Buf0                              00000004
Buf1                              00000005
Buf2                              00000006
CHGOverSbr                        000000ED
CHGPWM                            0000001E
CHGPWMSbr                         00000109
CHGSbr                            000000CB
CHGSbr0                           000000CD
CommandSbr                        000002B1
DIGCovSbr                         00000380
DIGCovSbr1                        00000381
DIV16Sbr                          00000277
DIV16Sbr0                         00000279
DIV16Sbr1                         00000287
DIV16Sbr2                         00000288
DecCHGPWMSbr                      00000125
Delay30MinSbr                     000000DB
DigTbl                            00000009
DisCHGChkSbr                      0000017C
DisCHGChkSbr1                     00000182
DisCHGPWM                         0000001D
DisCHGSbr                         00000146
DisCHGSbr1                        00000167
DisCHGSbr1A                       00000176
DisCHGSbrA                        0000015F
Disp1628IOutSbr                   00000355
Disp1628Sbr                       00000344
Disp1628Sbr1                      0000034F
Disp1628Sbr2                      00000352
Disp1628Sbr21                     0000037E
Disp1628VOutSbr                   0000036A
Disp1628batSbr                    00000366
DispBuf                           0000002B
DispCnt                           0000001C
DispCnt1628                       00000037
DispData                          0000002C
DispPWMCHGSbr                     0000036E
DispPWMCHGSbr1                    00000371
DispPWMDisCHGSbr                  0000037A
DisplaySbr                        00000188
DisplaySbr0                       00000190
DisplaySbr1                       00000195
DisplaySbr11                      0000019D
DisplaySbr2                       000001A1
DisplaySbr21                      000001AA
DisplaySbr22                      000001AF
DisplaySbr3                       000001B3
DisplaySbr31                      000001BC
DisplaySbr32                      000001C1
DisplaySbr4                       000001C5
DisplaySbr41                      000001CE
DisplaySbr42                      000001D3
DisplaySbr5                       000001D7
FSR0                              00000184
FSR1                              00000185
Flag1                             00000002
Flag2                             00000003
FrstKey1628Sbr                    0000033F
HIBYTE                            00000183
ILow0A1Dly5s                      00000024
INCCHGPWMSbr                      0000012B
INDF0                             00000180
INDF1                             00000181
INDF2                             00000182
INDF3                             00000189
INT1Sbr                           0000009D
INTE                              0000018A
INTF                              0000018B
IOut                              0000003A
IOutStartSbr                      000001DA
IfDisCHGSbr                       00000133
IfILowMinSbr                      000000CE
InitCHGPWM                        000000F1
InitCHGTmr                        00000102
InitalRAM                         0000007A
InitalRAM0                        0000007B
InitialSys                        00000059
InputSbr                          000003D7
InterruptSbr                      00000089
InterruptSbrR                     000000A3
KBIM                              00000197
KBIMSbr                           0000008E
Key1628Sbr                        000002F8
Key1Sbr                           00000318
Key2DisCHG                        0000032A
Key2Sbr                           0000031E
Key3DisCHG                        0000033A
Key3Sbr                           0000032E
Key5Sbr                           0000033E
KeyBuf                            00000023
KeyBuf1628                        0000002A
KeyCnt                            00000018
KeyCnt1628                        00000036
KeyCode                           00000022
KeyCode1628                       00000035
KeyData                           00000030
KeyLongth                         00000019
KeyLongthSbr                      0000001E
KeyLongthSbr0                     00000020
KeyLongthSbr1                     00000025
KeySbr                            00000011
KeyShortSbr                       00000027
KeyShortSbr1                      00000044
LVDCR                             000001AD
LoadCnt                           0000001F
MCR                               00000188
MulSbr                            0000028E
MulSbr0                           00000292
MulSbr1                           0000029C
NoKeySbr                          00000049
NoKeySbr1                         00000055
NoKeySbrR                         00000055
OEP0                              00000191
OEP1                              00000195
OSCCAL                            000001FB
OSCM                              000001AE
P0                                00000190
P1                                00000194
PCL                               00000186
PFLAG                             00000187
PFLAGBuf                          00000001
PUP0                              00000192
PUP1                              00000196
PwrDly                            00000007
PwrInSbr                          000000C3
RD1628KeySbr                      000002D2
RD1628KeySbr0                     000002D9
RD1628KeySbr1                     000002DB
RD1628KeySbr2                     000002E7
RDDigTbl                          00000390
RSET                              0000039F
RSET0                             000003A3
RSET1                             000003AC
SendByteSbr                       0000029F
SendByteSbr0                      000002A1
SendByteSbr1                      000002A9
SendDataSbr                       000002BC
SendDataSbr0                      000002C4
SetCHGPWMSbr                      00000130
SetDisCHGSbr                      00000179
Start                             000003AD
Start5msSbr                       000003BC
Start5msSbr1                      000003C6
Start5msSbr10                     000003CB
Start5msSbr11                     000003CD
Start5msSbr2                      000003DD
Status                            0000001A
SubSbr                            0000028B
T0CNT                             000001A1
T0CR                              000001A0
T0DATA                            000001A3
T0LOAD                            000001A2
T1CNT                             000001A5
T1CR                              000001A4
T1DATA                            000001A7
T1LOAD                            000001A6
T1d5ms                            00000008
T250ms                            00000017
T250msSbr                         000000A8
T250msSbr1                        000000B0
T30Min                            00000029
TMI0Sbr                           00000097
TMI1Sbr                           00000090
TMin                              00000028
TSec                              00000027
TStop5s                           00000026
VBatStartSbr                      000001E7
VBig5VDly5s                       00000025
VOutStartSbr                      000001EB
VinHiCnt                          00000021
VinLowCnt                         00000020
_CONFIG1                          00002000
_CONFIG2                          00002001
_CP_OFF                           00003FFF
_CP_ON                            00001FFF
_ENCR_                            00007FFF
_FCPU_128T                        00003BFF
_FCPU_16T                         00003EFF
_FCPU_256T                        00003AFF
_FCPU_2T                          00003FFF
_FCPU_32T                         00003DFF
_FCPU_4T                          00003F7F
_FCPU_64T                         00003CFF
_FCPU_8T                          00003FFF
_MCLRE_                           00003FBF
_MCU_EMC                          00003BFF
_MCU_FEL                          00003FFF
_MOSC_00                          00003FF7
_MOSC_01                          00003FEF
_MOSC_10                          00003FDF
_MOSC_11                          00003FCF
_OSCM_HS                          00003FFF
_OSCM_HS_RTC                      000037FF
_OSCM_IRC                         000027FF
_OSCM_LP                          00002FFF
_RDPORT_PIN                       00003FFF
_RDPORT_REG                       00003EFF
_SMT_OFF                          00003DFF
_SMT_ON                           00003EFF
_TWDT_16_1024                     00002FFF
_TWDT_256_4096                    00000FFF
_TWDT_4_512                       00003FFF
_TWDT_64_2048                     00001FFF
_TWDT_WDT_16                      000038FF
_TWDT_WDT_256                     000037FF
_TWDT_WDT_4                       000039FF
_TWDT_WDT_64                      00003FFF
_VLVRS_160                        00003FF9
_VLVRS_185                        00003FFA
_VLVRS_205                        00003FFB
_VLVRS_218                        00003FFC
_VLVRS_232                        00003FFD
_VLVRS_245                        00003FFF
_VLVRS_305                        00003FFF
_VLVRS_360                        00003FF7
_WDTC_00                          00000FFF
_WDTC_01                          00000FFF
_WDTC_1X                          00000FFF
__32P21                           00000001
test0                             000003A3
ADEOC                             ADCR0,1
ADIE                              INTE,6
ADIF                              INTF,6
ADON                              ADCR0,0
BUZ0OE                            T0CR,5
BUZ1OE                            T1CR,5
C                                 PFLAG,0
C1628                             0x20
C1d5ms                            200
C250ms                            200
CADIOut                           0x3E
CADRef2V                          0
CADRef3V                          1
CADRef4V                          2
CADRefExt                         4
CADRefVDD                         3
CADVBat                           0x0E
CADVOut                           0x2E
CBATI100mA                        0x0005
CBATI1A                           0x0049
CBATU350                          160
CBATU375                          171
CBATU400                          183
CBATU416                          190
CBATU424                          194
CCode0                            0x12
CCode1                            0x33
CCodeR                            CHEAD/2
CF250                             8
CFlash                            4
CHEAD                             0x87
CIDCode1                          0x80
CIDCode2                          0x7F
CIR4H                             0x01
CIR8H                             0x02
CIRCOLR1                          0x04
CIRCOLR2                          0x05
CIRCOLR3                          0x06
CIRCOLR4                          0x07
CIRCOLR5                          0x08
CIRCOLR6                          0x09
CIRCOLR7                          0x0A
CIRCOLR8                          0x1B
CIRCOLR9                          0x1F
CIRCOLRA                          0x0C
CIRCOLRB                          0x0D
CIRCOLRC                          0x0E
CIRMCOLR                          0x03
CIRMODE                           0x1E
CIROFF                            0x1A
CIRON                             0x12
CKEY1                             0x02
CKEY2                             0x20
CKEY3                             0x04
CKEY4                             0x08
CKEY5                             0x01
CLIGHT0                           0x88
CLIGHT1                           0x89
CLIGHT2                           0x8a
CLIGHT3                           0x8b
CLIGHT4                           0x8c
CLIGHT5                           0x8d
CLIGHT6                           0x8e
CLIGHT7                           0x8f
CLIGHTOFF                         0x80
CLKS                              OSCM,2
CMCandle                          2
CMMColor                          0
CMSColor                          1
COUT100mA                         2
COUT2A3                           0x54
COUT2A8                           0x0606
COUTU5V                           145
CStopTmr                          8
CT0                               128
CT1                               100
CT_2ms                            250
DC                                PFLAG,1
DEight                            (SegA|SegB|SegC|SegD|SegE|SegF|SegG)
DFive                             (SegA|SegC|SegD|SegF|SegG)
DFour                             (SegB|SegC|SegF|SegG)
DIGH                              0
DIGL                              3
DIGMH                             1
DIGML                             2
DLetterA                          (SegA|SegB|SegC|SegE|SegF|SegG)
DLetterC                          (SegA|SegD|SegE|SegF)
DLetterE                          (SegA|SegD|SegE|SegF|SegG)
DLetterF                          (SegA|SegE|SegF|SegG)
DLetterP                          (SegA|SegB|SegE|SegF|SegG)
DLetterV                          (SegC|SegD|SegE)
DLetterb                          (SegC|SegD|SegE|SegF|SegG)
DLetterd                          (SegB|SegC|SegD|SegE|SegG)
DLettert                          (SegD|SegE|SegF|SegG)
DNine                             (SegA|SegB|SegC|SegD|SegF|SegG)
DOne                              (SegB|SegC)
DSeven                            (SegA|SegB|SegC)
DSix                              (SegA|SegC|SegD|SegE|SegF|SegG)
DThree                            (SegA|SegB|SegC|SegD|SegG)
DTwo                              (SegA|SegB|SegD|SegE|SegG)
DZero                             (SegA|SegB|SegC|SegD|SegE|SegF)
F1628                             Flag2,5
F2ms                              Flag2,2
FBig5V                            Flag1,5
FCHGOver                          Flag1,4
FCHGTmr                           Flag1,6
FDisCHGAD                         Flag2,7
FF250                             Flag1,3
FFlash                            Flag1,2
FKeyAck                           Flag1,1
FKeyAck1628                       Flag2,4
FLight                            Flag2,6
FLongRKey                         Flag2,0
FPwr                              Flag1,0
FStop                             Flag2,1
FStopTmr                          Flag2,3
FVIN                              Flag1,7
GIE                               MCR,7
HFEN                              OSCM,0
INT0IE                            INTE,2
INT0IF                            INTF,2
INT1IE                            INTE,3
INT1IF                            INTF,3
KBIE                              INTE,4
KBIF                              INTF,4
KBIM0                             KBIM,0
KBIM1                             KBIM,1
KBIM2                             KBIM,2
KBIM3                             KBIM,3
KBIM4                             KBIM,4
KBIM5                             KBIM,5
KBIM6                             KBIM,6
LFEN                              OSCM,1
LVDEN                             LVDCR,7
LVDF                              LVDCR,0
MINT00                            MCR,0
MINT01                            MCR,1
MINT10                            MCR,2
MINT11                            MCR,3
PD                                MCR,4
PWM0OE                            T0CR,6
PWM1OE                            T1CR,6
STBH                              OSCM,4
STBL                              OSCM,5
SegA                              0x40
SegB                              0x10
SegC                              0x04
SegD                              0x01
SegDp                             0x02
SegE                              0x80
SegF                              0x20
SegG                              0x08
T0IE                              INTE,0
T0IF                              INTF,0
T1IE                              INTE,1
T1IF                              INTF,1
TC0EN                             T0CR,7
TC1EN                             T1CR,7
TColor                            127
TO                                MCR,5
TSteplengh                        127
Test                              0
VRS0                              ADCR1,0
VRS1                              ADCR1,1
VRS2                              ADCR1,2
Z                                 PFLAG,2
_CONST_H_                         (null)
_MC32P21_H_                       (null)
_TM1628_H_                        (null)
_VAR_H_                           (null)
cCLK                              OEP1,4
cDIO                              OEP1,5
cSTB                              OEP0,4
pCHG                              P1,3
pCLK                              P1,4
pDIO                              P1,5
pDisCHG                           P1,2
pKey                              P1,6
pLed1                             P1,4
pLed1C                            OEP1,4
pLed2                             P1,5
pLed2C                            OEP1,5
pLedC                             P0,4
pLedCC                            OEP0,4
pLedW                             P0,1
pPwr                              P1,0
pSTB                              P0,4
pVIN                              P1,1

Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :     0 reported,     0 suppressed

